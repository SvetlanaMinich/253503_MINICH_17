{% block content %}
    <a href="{% url 'createorder' client_id=client_id %}">Назад</a>
    <h2>Корзина</h2>
    <table border="1">
        <thead>
            <tr>
                <th id="Service">Услуга</th>
                <th id="Part">Запчасть</th>
                <th id="Quantity">Количество</th>
                <th id="PPE">Цена за единицу</th>
                <th id="TotalP">Общая цена</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for item in cart_items %}
            <tr>
                {% if item.service %}
                    <td header="Service">{{ item.service.name }}</td>
                    <td header="Part" colspan="2"></td>
                    <td header="PPE">{{ item.service.price }}</td>
                    <td header="TotalP">{{ item.total_price }}</td>
                {%else%}
                    <td header="Service"></td>
                    <td header="Part">{{ item.part.name }}</td>
                    <td header="Quantity"><form method="post">
                        {% csrf_token %}
                            <input type="hidden" name="item_id" value="{{ item.id }}">
                            <button type="submit" name="decrease_quantity">-</button>
                            {{ item.quantity }}
                            <button type="submit" name="increase_quantity">+</button>
                    </form></td>
                    <td header="PPE">{{ item.part.price }}</td>
                    <td header="TotalP">{{ item.total_price }}</td>
                {%endif%}
                <td>
                    <form method="post">
                        {% csrf_token %}
                        <input type="hidden" name="item_id" value="{{ item.id }}">
                        <button type="submit" name="remove">Удалить</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h3>Общая стоимость: {{ total_price }}</h3>
    <button>Оплатить</button>
{% endblock %}
